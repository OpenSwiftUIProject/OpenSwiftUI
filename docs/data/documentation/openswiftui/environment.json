{"schemaVersion":{"minor":3,"major":0,"patch":0},"hierarchy":{"paths":[["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI"]]},"kind":"symbol","topicSections":[{"anchor":"Creating-an-environment-property","title":"Creating an environment property","identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/init(_:)"]},{"anchor":"Getting-the-value","title":"Getting the value","identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/wrappedValue"]},{"anchor":"Default-Implementations","generated":true,"title":"Default Implementations","identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/DynamicProperty-Implementations"]}],"relationshipsSections":[{"identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/DynamicProperty","doc:\/\/OpenSwiftUI\/s8SendableP"],"type":"conformsTo","title":"Conforms To","kind":"relationships"}],"sections":[],"abstract":[{"text":"A property wrapper that reads a value from a view’s environment.","type":"text"}],"primaryContentSections":[{"declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"text":"@frozen","kind":"attribute"},{"text":" ","kind":"text"},{"text":"@propertyWrapper","kind":"attribute"},{"text":" ","kind":"text"},{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Environment","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Value","kind":"genericParameter"},{"text":">","kind":"text"}]}],"kind":"declarations"},{"content":[{"text":"Overview","level":2,"type":"heading","anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the "},{"type":"codeVoice","code":"Environment"},{"type":"text","text":" property wrapper to read a value"},{"type":"text","text":" "},{"type":"text","text":"stored in a view’s environment. Indicate the value to read using an"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/EnvironmentValues"},{"type":"text","text":" key path in the property declaration. For example, you"},{"type":"text","text":" "},{"type":"text","text":"can create a property that reads the color scheme of the current"},{"type":"text","text":" "},{"type":"text","text":"view using the key path of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/EnvironmentValues\/colorScheme"},{"type":"text","text":" "},{"type":"text","text":"property:"}]},{"type":"codeListing","code":["@Environment(\\.colorScheme) var colorScheme: ColorScheme"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"You can condition a view’s content on the associated value, which","type":"text"},{"text":" ","type":"text"},{"text":"you read from the declared property’s ","type":"text"},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/wrappedValue","type":"reference","isActive":true},{"text":". As with any property","type":"text"},{"text":" ","type":"text"},{"text":"wrapper, you access the wrapped value by directly referring to the property:","type":"text"}]},{"type":"codeListing","code":["if colorScheme == .dark { \/\/ Checks the wrapped value.","    DarkContent()","} else {","    LightContent()","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"If the value changes, OpenSwiftUI updates any parts of your view that depend on","type":"text"},{"text":" ","type":"text"},{"text":"the value. For example, that might happen in the above example if the user","type":"text"},{"text":" ","type":"text"},{"text":"changes the Appearance settings.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"You can use this property wrapper to read — but not set — an environment","type":"text"},{"text":" ","type":"text"},{"text":"value. OpenSwiftUI updates some environment values automatically based on system","type":"text"},{"text":" ","type":"text"},{"text":"settings and provides reasonable defaults for others. You can override some","type":"text"},{"text":" ","type":"text"},{"text":"of these, as well as set custom environment values that you define,","type":"text"},{"text":" ","type":"text"},{"text":"using the ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:_:)"},{"text":" view modifier.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For the complete list of environment values provided by OpenSwiftUI, see the"},{"type":"text","text":" "},{"type":"text","text":"properties of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/EnvironmentValues"},{"type":"text","text":" structure. For information about"},{"type":"text","text":" "},{"type":"text","text":"creating custom environment values, see the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Entry()"},{"type":"text","text":" macro."}]},{"text":"Get an observable object","level":3,"type":"heading","anchor":"Get-an-observable-object"},{"type":"paragraph","inlineContent":[{"text":"You can also use ","type":"text"},{"type":"codeVoice","code":"Environment"},{"text":" to get an observable object from a view’s","type":"text"},{"text":" ","type":"text"},{"text":"environment. The observable object must conform to the","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/swiftpackageindex.com\/openswiftuiproject\/openobservation\/main\/documentation\/openobservation\/observable"},{"text":" ","type":"text"},{"text":"protocol, and your app must set the object in the environment using the","type":"text"},{"text":" ","type":"text"},{"text":"the object itself or a key path.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To set the object in the environment using the object itself, use the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:)"},{"type":"text","text":" modifier:"}]},{"type":"codeListing","code":["@Observable","class Library {","    var books: [Book] = [Book(), Book(), Book()]","","    var availableBooksCount: Int {","        books.filter(\\.isAvailable).count","    }","}","","@main","struct BookReaderApp: App {","    @State private var library = Library()","","    var body: some Scene {","        WindowGroup {","            LibraryView()","                .environment(library)","        }","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"To get the observable object using its type, create a property and provide","type":"text"},{"text":" ","type":"text"},{"text":"the ","type":"text"},{"code":"Environment","type":"codeVoice"},{"text":" property wrapper the object’s type:","type":"text"}]},{"type":"codeListing","code":["struct LibraryView: View {","    @Environment(Library.self) private var library","","    var body: some View {","        \/\/ ...","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, reading an object from the environment returns a non-optional"},{"type":"text","text":" "},{"type":"text","text":"object when using the object type as the key. This default behavior assumes"},{"type":"text","text":" "},{"type":"text","text":"that a view in the current hierarchy previously stored a non-optional"},{"type":"text","text":" "},{"type":"text","text":"instance of the type using the "},{"isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:)","type":"reference"},{"type":"text","text":" modifier. If"},{"type":"text","text":" "},{"type":"text","text":"a view attempts to retrieve an object using its type and that object isn’t"},{"type":"text","text":" "},{"type":"text","text":"in the environment, OpenSwiftUI throws an exception."}]},{"type":"paragraph","inlineContent":[{"text":"In cases where there is no guarantee that an object is in the environment,","type":"text"},{"text":" ","type":"text"},{"text":"retrieve an optional version of the object as shown in the following code.","type":"text"},{"text":" ","type":"text"},{"text":"If the object isn’t available the environment, OpenSwiftUI returns ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":" ","type":"text"},{"text":"instead of throwing an exception.","type":"text"}]},{"type":"codeListing","code":["@Environment(Library.self) private var library: Library?"],"syntax":"swift"},{"text":"Get an observable object using a key path","level":3,"type":"heading","anchor":"Get-an-observable-object-using-a-key-path"},{"type":"paragraph","inlineContent":[{"text":"To set the object with a key path, use the ","type":"text"},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:_:)","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"modifier:","type":"text"}]},{"type":"codeListing","code":["@Observable","class Library {","    var books: [Book] = [Book(), Book(), Book()]","","    var availableBooksCount: Int {","        books.filter(\\.isAvailable).count","    }","}","","@main","struct BookReaderApp: App {","    @State private var library = Library()","","    var body: some Scene {","        WindowGroup {","            LibraryView()","                .environment(\\.library, library)","        }","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"To get the object, create a property and specify the key path:","type":"text"}]},{"type":"codeListing","code":["struct LibraryView: View {","    @Environment(\\.library) private var library","","    var body: some View {","        \/\/ ...","    }","}"],"syntax":"swift"}],"kind":"content"}],"metadata":{"modules":[{"name":"OpenSwiftUI"}],"remoteSource":{"fileName":"Environment.swift","url":"https:\/\/github.com\/OpenSwiftUIProject\/OpenSwiftUI\/blob\/main\/Sources\/OpenSwiftUICore\/Data\/Environment\/Environment.swift#L150"},"externalID":"s:15OpenSwiftUICore11EnvironmentV","role":"symbol","platforms":[{"unavailable":false,"beta":false,"introducedAt":"13.0","name":"iOS","deprecated":false},{"unavailable":false,"beta":false,"introducedAt":"10.15","name":"macOS","deprecated":false},{"unavailable":false,"beta":false,"introducedAt":"13.0","name":"tvOS","deprecated":false},{"unavailable":false,"beta":false,"introducedAt":"1.0","name":"visionOS","deprecated":false},{"unavailable":false,"beta":false,"introducedAt":"6.0","name":"watchOS","deprecated":false}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Environment","kind":"identifier"}],"navigatorTitle":[{"text":"Environment","kind":"identifier"}],"title":"Environment","symbolKind":"struct","roleHeading":"Structure"},"identifier":{"url":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/openswiftui\/environment"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://OpenSwiftUI/documentation/OpenSwiftUI/Environment/init(_:)":{"type":"topic","role":"symbol","abstract":[{"text":"Creates an environment property to read the specified key path.","type":"text"}],"fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"_","kind":"externalParam"},{"text":":)","kind":"text"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/init(_:)","kind":"symbol","url":"\/documentation\/openswiftui\/environment\/init(_:)","title":"init(_:)","navigatorTitle":[{"text":"init","kind":"keyword"},{"text":"(","kind":"text"},{"text":"_","kind":"externalParam"},{"text":":)","kind":"text"}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/Environment":{"navigatorTitle":[{"text":"Environment","kind":"identifier"}],"abstract":[{"text":"A property wrapper that reads a value from a view’s environment.","type":"text"}],"kind":"symbol","role":"symbol","title":"Environment","type":"topic","url":"\/documentation\/openswiftui\/environment","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Environment","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/EnvironmentValues":{"title":"EnvironmentValues","kind":"symbol","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EnvironmentValues","kind":"identifier"}],"navigatorTitle":[{"text":"EnvironmentValues","kind":"identifier"}],"type":"topic","url":"\/documentation\/openswiftui\/environmentvalues","abstract":[{"type":"text","text":"A collection of environment values propagated through a view hierarchy."}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/EnvironmentValues"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/EnvironmentValues/colorScheme":{"title":"colorScheme","kind":"symbol","url":"\/documentation\/openswiftui\/environmentvalues\/colorscheme","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/EnvironmentValues\/colorScheme","type":"topic","role":"symbol","abstract":[{"text":"The color scheme of this environment.","type":"text"}],"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"colorScheme"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ColorScheme","preciseIdentifier":"s:15OpenSwiftUICore11ColorSchemeO"}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/View/environment(_:)":{"title":"environment(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"environment"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":"?) -> "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"View","preciseIdentifier":"s:15OpenSwiftUICore4ViewP"}],"kind":"symbol","abstract":[{"type":"text","text":"Places an observable object in the view’s environment."}],"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:)","role":"symbol","url":"\/documentation\/openswiftui\/view\/environment(_:)"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/View/environment(_:_:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"environment"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"V"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"EnvironmentValues","preciseIdentifier":"s:15OpenSwiftUICore17EnvironmentValuesV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"V"},{"kind":"text","text":">, "},{"kind":"typeIdentifier","text":"V"},{"kind":"text","text":") -> "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"View","preciseIdentifier":"s:15OpenSwiftUICore4ViewP"}],"title":"environment(_:_:)","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/View\/environment(_:_:)","abstract":[{"text":"Sets the environment value of the specified key path to the given value.","type":"text"}],"role":"symbol","kind":"symbol","url":"\/documentation\/openswiftui\/view\/environment(_:_:)","type":"topic"},"https://swiftpackageindex.com/openswiftuiproject/openobservation/main/documentation/openobservation/observable":{"url":"https:\/\/swiftpackageindex.com\/openswiftuiproject\/openobservation\/main\/documentation\/openobservation\/observable","title":"Observable","type":"link","titleInlineContent":[{"type":"text","text":"Observable"}],"identifier":"https:\/\/swiftpackageindex.com\/openswiftuiproject\/openobservation\/main\/documentation\/openobservation\/observable"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/Entry()":{"url":"\/documentation\/openswiftui\/entry()","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Entry()","fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Entry","kind":"identifier"},{"text":"()","kind":"text"}],"type":"topic","kind":"symbol","role":"symbol","title":"Entry()","abstract":[]},"doc://OpenSwiftUI/documentation/OpenSwiftUI":{"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI","url":"\/documentation\/openswiftui","title":"OpenSwiftUI","kind":"symbol","role":"collection","abstract":[{"type":"text","text":"Declare the user interface and behavior for your app on every platform."}]},"doc://OpenSwiftUI/s8SendableP":{"identifier":"doc:\/\/OpenSwiftUI\/s8SendableP","type":"unresolvable","title":"Swift.Sendable"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/DynamicProperty":{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/DynamicProperty","title":"DynamicProperty","abstract":[{"type":"text","text":"An interface for a stored variable that updates an external property of a"},{"type":"text","text":" "},{"type":"text","text":"view."}],"kind":"symbol","type":"topic","url":"\/documentation\/openswiftui\/dynamicproperty","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DynamicProperty","kind":"identifier"}],"role":"symbol","navigatorTitle":[{"text":"DynamicProperty","kind":"identifier"}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/Environment/wrappedValue":{"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"wrappedValue"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Value"}],"url":"\/documentation\/openswiftui\/environment\/wrappedvalue","type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/wrappedValue","title":"wrappedValue","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"The current value of the environment property."}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/Environment/DynamicProperty-Implementations":{"type":"topic","kind":"article","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/Environment\/DynamicProperty-Implementations","title":"DynamicProperty Implementations","role":"collectionGroup","url":"\/documentation\/openswiftui\/environment\/dynamicproperty-implementations","abstract":[]}}}