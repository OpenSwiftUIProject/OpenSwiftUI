{"hierarchy":{"paths":[["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI","doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationState"]]},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"text":"subscript","kind":"keyword"},{"text":"<","kind":"text"},{"text":"K","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"key","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"K","kind":"typeIdentifier"},{"text":".Type) -> ","kind":"text"},{"text":"K","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Value","kind":"typeIdentifier","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/Value","preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP5ValueQa"},{"text":" ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"K","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"AnimationStateKey","kind":"typeIdentifier","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey","preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP"},{"text":" { ","kind":"text"},{"text":"get","kind":"keyword"},{"text":" ","kind":"text"},{"text":"set","kind":"keyword"},{"text":" }","kind":"text"}]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a custom animation state value by defining a key that conforms"},{"type":"text","text":" "},{"type":"text","text":"to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey"},{"type":"text","text":" protocol and provide the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/defaultValue"},{"type":"text","text":" for the key. Also include properties"},{"type":"text","text":" "},{"type":"text","text":"to read and write state values that your "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/CustomAnimation"},{"type":"text","text":" uses. For"},{"type":"text","text":" "},{"type":"text","text":"example, the following code defines a key named "},{"type":"codeVoice","code":"PausableState"},{"type":"text","text":" that"},{"type":"text","text":" "},{"type":"text","text":"has two state values, "},{"type":"codeVoice","code":"paused"},{"type":"text","text":" and "},{"type":"codeVoice","code":"pauseTime"},{"type":"text","text":":"}]},{"code":["private struct PausableState<Value: VectorArithmetic>: AnimationStateKey {","    var paused = false","    var pauseTime: TimeInterval = 0.0","","    static var defaultValue: Self { .init() }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use that key with the subscript operator of the "},{"type":"reference","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationState","isActive":true},{"type":"text","text":" "},{"type":"text","text":"structure to get and set a value for the key. For more convenient"},{"type":"text","text":" "},{"type":"text","text":"access to the key value, extend "},{"type":"reference","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","isActive":true},{"type":"text","text":" with a computed"},{"type":"text","text":" "},{"type":"text","text":"property that gets and sets the key’s value."}]},{"code":["extension AnimationContext {","    fileprivate var pausableState: PausableState<Value> {","        get { state[PausableState<Value>.self] }","        set { state[PausableState<Value>.self] = newValue }","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To access the state values in a "},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/CustomAnimation","type":"reference","isActive":true},{"type":"text","text":", call the custom"},{"type":"text","text":" "},{"type":"text","text":"computed property, then read and write the state values that the"},{"type":"text","text":" "},{"type":"text","text":"custom "},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey","type":"reference","isActive":true},{"type":"text","text":" provides."}]},{"code":["struct PausableAnimation: CustomAnimation {","    let base: Animation","","    func animate<V>(value: V, time: TimeInterval, context: inout AnimationContext<V>) -> V? where V : VectorArithmetic {","        let paused = context.environment.animationPaused","","        let pausableState = context.pausableState","        var pauseTime = pausableState.pauseTime","        if pausableState.paused != paused {","            pauseTime = time - pauseTime","            context.pausableState = PausableState(paused: paused, pauseTime: pauseTime)","        }","","        let effectiveTime = paused ? pauseTime : time - pauseTime","        let result = base.animate(value: value, time: effectiveTime, context: &context)","        return result","    }","}"],"type":"codeListing","syntax":"swift"}]}],"schemaVersion":{"major":0,"patch":0,"minor":3},"abstract":[{"type":"text","text":"Accesses the state for a custom key."}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/openswiftui\/animationstate\/subscript(_:)"]}],"kind":"symbol","metadata":{"symbolKind":"subscript","role":"symbol","remoteSource":{"fileName":"AnimationState.swift","url":"https:\/\/github.com\/OpenSwiftUIProject\/OpenSwiftUI\/blob\/main\/Sources\/OpenSwiftUICore\/Animation\/Animation\/AnimationState.swift#L202"},"externalID":"s:15OpenSwiftUICore14AnimationStateVy5ValueQyd__qd__mcAA0dE3KeyRd__luip","platforms":[{"unavailable":false,"introducedAt":"13.0","beta":false,"deprecated":false,"name":"iOS"},{"unavailable":false,"introducedAt":"10.15","beta":false,"deprecated":false,"name":"macOS"},{"unavailable":false,"introducedAt":"13.0","beta":false,"deprecated":false,"name":"tvOS"},{"unavailable":false,"introducedAt":"1.0","beta":false,"deprecated":false,"name":"visionOS"},{"unavailable":false,"introducedAt":"6.0","beta":false,"deprecated":false,"name":"watchOS"}],"modules":[{"name":"OpenSwiftUI"}],"roleHeading":"Instance Subscript","fragments":[{"kind":"keyword","text":"subscript"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"K"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"K"},{"kind":"text","text":".Type) -> "},{"kind":"typeIdentifier","text":"K"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP5ValueQa"}],"title":"subscript(_:)"},"sections":[],"identifier":{"url":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationState\/subscript(_:)","interfaceLanguage":"swift"},"references":{"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationState":{"navigatorTitle":[{"text":"AnimationState","kind":"identifier"}],"kind":"symbol","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationState","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationState","type":"topic","title":"AnimationState","abstract":[{"text":"A container that stores the state for a custom animation.","type":"text"}],"url":"\/documentation\/openswiftui\/animationstate"},"doc://OpenSwiftUI/documentation/OpenSwiftUI":{"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI","url":"\/documentation\/openswiftui","title":"OpenSwiftUI","kind":"symbol","role":"collection","abstract":[{"type":"text","text":"Declare the user interface and behavior for your app on every platform."}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationState/subscript(_:)":{"title":"subscript(_:)","url":"\/documentation\/openswiftui\/animationstate\/subscript(_:)","abstract":[{"type":"text","text":"Accesses the state for a custom key."}],"kind":"symbol","role":"symbol","fragments":[{"text":"subscript","kind":"keyword"},{"text":"<","kind":"text"},{"text":"K","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"K","kind":"typeIdentifier"},{"text":".Type) -> ","kind":"text"},{"text":"K","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP5ValueQa","text":"Value","kind":"typeIdentifier"}],"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationState\/subscript(_:)"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey":{"navigatorTitle":[{"text":"AnimationStateKey","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey","title":"AnimationStateKey","abstract":[{"text":"A key for accessing animation state values.","type":"text"}],"url":"\/documentation\/openswiftui\/animationstatekey","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationStateKey","kind":"identifier"}],"role":"symbol","kind":"symbol","type":"topic"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/CustomAnimation":{"navigatorTitle":[{"kind":"identifier","text":"CustomAnimation"}],"role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomAnimation"}],"type":"topic","url":"\/documentation\/openswiftui\/customanimation","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/CustomAnimation","kind":"symbol","abstract":[{"type":"text","text":"A type that defines how an animatable value changes over time."}],"title":"CustomAnimation"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey/Value":{"required":true,"type":"topic","kind":"symbol","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/Value","title":"Value","fragments":[{"kind":"keyword","text":"associatedtype"},{"kind":"text","text":" "},{"kind":"identifier","text":"Value"}],"abstract":[{"type":"text","text":"The associated type representing the type of the animation state key’s"},{"type":"text","text":" "},{"type":"text","text":"value."}],"url":"\/documentation\/openswiftui\/animationstatekey\/value","role":"symbol"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey/defaultValue":{"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"defaultValue"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP5ValueQa"}],"kind":"symbol","role":"symbol","url":"\/documentation\/openswiftui\/animationstatekey\/defaultvalue","required":true,"abstract":[{"text":"The default value for the animation state key.","type":"text"}],"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/defaultValue","title":"defaultValue"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationContext":{"url":"\/documentation\/openswiftui\/animationcontext","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationContext","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","title":"AnimationContext","navigatorTitle":[{"text":"AnimationContext","kind":"identifier"}],"type":"topic","abstract":[{"text":"Contextual values that a custom animation can use to manage state and","type":"text"},{"text":" ","type":"text"},{"text":"access a view’s environment.","type":"text"}],"kind":"symbol"}}}