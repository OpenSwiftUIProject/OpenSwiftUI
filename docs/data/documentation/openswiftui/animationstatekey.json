{"schemaVersion":{"major":0,"minor":3,"patch":0},"topicSections":[{"identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/Value"],"generated":true,"anchor":"Associated-Types","title":"Associated Types"},{"identifiers":["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/defaultValue"],"generated":true,"anchor":"Type-Properties","title":"Type Properties"}],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"tokens":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationStateKey","kind":"identifier"}],"languages":["swift"]}]},{"content":[{"text":"Overview","level":2,"anchor":"overview","type":"heading"},{"inlineContent":[{"text":"To access animation state from an ","type":"text"},{"isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","type":"reference"},{"text":" in a custom","type":"text"},{"text":" ","type":"text"},{"text":"animation, create an ","type":"text"},{"type":"codeVoice","code":"AnimationStateKey"},{"text":". For example, the following","type":"text"},{"text":" ","type":"text"},{"text":"code creates an animation state key named ","type":"text"},{"type":"codeVoice","code":"PausableState"},{"text":" and sets the","type":"text"},{"text":" ","type":"text"},{"text":"value for the required ","type":"text"},{"isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/defaultValue","type":"reference"},{"text":" property. The code also defines","type":"text"},{"text":" ","type":"text"},{"text":"properties for state values that the custom animation needs when","type":"text"},{"text":" ","type":"text"},{"text":"calculating animation values. Keeping the state values in the animation","type":"text"},{"text":" ","type":"text"},{"text":"state key makes it more convenient to read and write those values in the","type":"text"},{"text":" ","type":"text"},{"text":"implementation of a ","type":"text"},{"isActive":true,"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/CustomAnimation","type":"reference"},{"text":".","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["private struct PausableState<Value: VectorArithmetic>: AnimationStateKey {","    var paused = false","    var pauseTime: TimeInterval = 0.0","","    static var defaultValue: Self { .init() }","}"]},{"inlineContent":[{"text":"To make accessing the value of the animation state key more convenient,","type":"text"},{"text":" ","type":"text"},{"text":"define a property for it by extending ","type":"text"},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","type":"reference","isActive":true},{"text":":","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["extension AnimationContext {","    fileprivate var pausableState: PausableState<Value> {","        get { state[PausableState<Value>.self] }","        set { state[PausableState<Value>.self] = newValue }","    }","}"]},{"inlineContent":[{"text":"Then, you can read and write your state in an instance of ","type":"text"},{"type":"codeVoice","code":"CustomAnimation"},{"text":" ","type":"text"},{"text":"using the ","type":"text"},{"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","type":"reference","isActive":true},{"text":":","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["struct PausableAnimation: CustomAnimation {","    let base: Animation","","    func animate<V>(value: V, time: TimeInterval, context: inout AnimationContext<V>) -> V? where V : VectorArithmetic {","        let paused = context.environment.animationPaused","","        let pausableState = context.pausableState","        var pauseTime = pausableState.pauseTime","        if pausableState.paused != paused {","            pauseTime = time - pauseTime","            context.pausableState = PausableState(paused: paused, pauseTime: pauseTime)","        }","","        let effectiveTime = paused ? pauseTime : time - pauseTime","        let result = base.animate(value: value, time: effectiveTime, context: &context)","        return result","    }","}"]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/openswiftui\/animationstatekey"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI"]]},"metadata":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AnimationStateKey"}],"platforms":[{"name":"iOS","beta":false,"introducedAt":"13.0","unavailable":false,"deprecated":false},{"name":"macOS","beta":false,"introducedAt":"10.15","unavailable":false,"deprecated":false},{"name":"tvOS","beta":false,"introducedAt":"13.0","unavailable":false,"deprecated":false},{"name":"visionOS","beta":false,"introducedAt":"1.0","unavailable":false,"deprecated":false},{"name":"watchOS","beta":false,"introducedAt":"6.0","unavailable":false,"deprecated":false}],"roleHeading":"Protocol","title":"AnimationStateKey","symbolKind":"protocol","remoteSource":{"url":"https:\/\/github.com\/OpenSwiftUIProject\/OpenSwiftUI\/blob\/main\/Sources\/OpenSwiftUICore\/Animation\/Animation\/AnimationState.swift#L269","fileName":"AnimationState.swift"},"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"AnimationStateKey"}],"modules":[{"name":"OpenSwiftUI"}],"externalID":"s:15OpenSwiftUICore17AnimationStateKeyP"},"sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey"},"abstract":[{"type":"text","text":"A key for accessing animation state values."}],"kind":"symbol","references":{"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey":{"navigatorTitle":[{"text":"AnimationStateKey","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey","title":"AnimationStateKey","abstract":[{"text":"A key for accessing animation state values.","type":"text"}],"url":"\/documentation\/openswiftui\/animationstatekey","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationStateKey","kind":"identifier"}],"role":"symbol","kind":"symbol","type":"topic"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey/defaultValue":{"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"defaultValue"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:15OpenSwiftUICore17AnimationStateKeyP5ValueQa"}],"kind":"symbol","role":"symbol","url":"\/documentation\/openswiftui\/animationstatekey\/defaultvalue","required":true,"abstract":[{"text":"The default value for the animation state key.","type":"text"}],"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/defaultValue","title":"defaultValue"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationStateKey/Value":{"required":true,"type":"topic","kind":"symbol","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationStateKey\/Value","title":"Value","fragments":[{"kind":"keyword","text":"associatedtype"},{"kind":"text","text":" "},{"kind":"identifier","text":"Value"}],"abstract":[{"type":"text","text":"The associated type representing the type of the animation state key’s"},{"type":"text","text":" "},{"type":"text","text":"value."}],"url":"\/documentation\/openswiftui\/animationstatekey\/value","role":"symbol"},"doc://OpenSwiftUI/documentation/OpenSwiftUI/AnimationContext":{"url":"\/documentation\/openswiftui\/animationcontext","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationContext","kind":"identifier"}],"identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/AnimationContext","title":"AnimationContext","navigatorTitle":[{"text":"AnimationContext","kind":"identifier"}],"type":"topic","abstract":[{"text":"Contextual values that a custom animation can use to manage state and","type":"text"},{"text":" ","type":"text"},{"text":"access a view’s environment.","type":"text"}],"kind":"symbol"},"doc://OpenSwiftUI/documentation/OpenSwiftUI":{"type":"topic","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI","url":"\/documentation\/openswiftui","title":"OpenSwiftUI","kind":"symbol","role":"collection","abstract":[{"type":"text","text":"Declare the user interface and behavior for your app on every platform."}]},"doc://OpenSwiftUI/documentation/OpenSwiftUI/CustomAnimation":{"navigatorTitle":[{"kind":"identifier","text":"CustomAnimation"}],"role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomAnimation"}],"type":"topic","url":"\/documentation\/openswiftui\/customanimation","identifier":"doc:\/\/OpenSwiftUI\/documentation\/OpenSwiftUI\/CustomAnimation","kind":"symbol","abstract":[{"type":"text","text":"A type that defines how an animatable value changes over time."}],"title":"CustomAnimation"}}}